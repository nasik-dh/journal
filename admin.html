<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Insight - Admin Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png" href="logo1.png">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .academic-title {
            font-family: 'Crimson Text', serif;
        }
        
        .sidebar {
            height: calc(100vh - 64px);
        }
        
        .content-area {
            height: calc(100vh - 64px);
            overflow-y: auto;
        }
        
        .preview-frame {
            width: 100%;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e0;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
        
        /* Markdown editor styles */
        .md-editor {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .md-preview {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            background-color: #f8f9fa;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 16px;
            border-radius: 8px;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: opacity 0.5s ease-in-out;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        /* Badge styles */
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.25rem;
        }
        
        .badge-blue { background: #ebf8ff; color: #2b6cb0; }
        .badge-green { background: #f0fff4; color: #2f855a; }
        .badge-red { background: #fff5f5; color: #c53030; }
        .badge-purple { background: #faf5ff; color: #6b46c1; }
        .badge-yellow { background: #fffaf0; color: #b7791f; }
        
        .table-container {
            max-height: calc(100vh - 300px);
            overflow-y: auto;
        }
    </style>
</head>

<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-blue-900 text-white h-16">
        <div class="flex items-center justify-between h-full px-6">
            <div class="flex items-center">
                <h1 class="text-xl font-bold academic-title">
                    Islamic Insight <span class="ml-2 text-blue-200 text-sm">Admin Panel</span>
                </h1>
            </div>
            <div class="flex items-center space-x-3">
                <button id="save-all-btn" class="bg-blue-700 hover:bg-blue-600 text-white px-4 py-2 rounded-md">
                    <i class="fas fa-save mr-1"></i> Save Changes
                </button>
                <button id="export-btn" class="bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded-md text-sm">
                    <i class="fas fa-file-export mr-1"></i> Export
                </button>
                <button id="import-btn" class="bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded-md text-sm">
                    <i class="fas fa-file-import mr-1"></i> Import
                </button>
                <a href="index.html" target="_blank" class="text-blue-200 hover:text-white ml-2">
                    <i class="fas fa-external-link-alt"></i> View Site
                </a>
            </div>
        </div>
    </header>

    <div class="flex h-full">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-gray-200 sidebar">
            <nav class="p-4">
                <h2 class="text-lg font-semibold text-gray-900 mb-4">Manage Content</h2>
                <ul class="space-y-1">
                    <li>
                        <a href="#" class="nav-link" data-view="dashboard" id="dashboard-link">
                            <div class="flex items-center p-3 rounded-md hover:bg-blue-50 text-gray-700 hover:text-blue-900">
                                <i class="fas fa-tachometer-alt w-5"></i>
                                <span class="ml-2">Dashboard</span>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-view="featured" id="featured-link">
                            <div class="flex items-center p-3 rounded-md hover:bg-blue-50 text-gray-700 hover:text-blue-900">
                                <i class="fas fa-star w-5"></i>
                                <span class="ml-2">Featured Articles</span>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-view="publications" id="publications-link">
                            <div class="flex items-center p-3 rounded-md hover:bg-blue-50 text-gray-700 hover:text-blue-900">
                                <i class="fas fa-book w-5"></i>
                                <span class="ml-2">Publications</span>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-view="preview" id="preview-link">
                            <div class="flex items-center p-3 rounded-md hover:bg-blue-50 text-gray-700 hover:text-blue-900">
                                <i class="fas fa-eye w-5"></i>
                                <span class="ml-2">Preview</span>
                            </div>
                        </a>
                    </li>
                </ul>

                <h2 class="text-lg font-semibold text-gray-900 mt-8 mb-4">Settings</h2>
                <ul class="space-y-1">
                    <li>
                        <a href="#" class="nav-link" data-view="backup" id="backup-link">
                            <div class="flex items-center p-3 rounded-md hover:bg-blue-50 text-gray-700 hover:text-blue-900">
                                <i class="fas fa-database w-5"></i>
                                <span class="ml-2">Backup & Restore</span>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="nav-link" data-view="help" id="help-link">
                            <div class="flex items-center p-3 rounded-md hover:bg-blue-50 text-gray-700 hover:text-blue-900">
                                <i class="fas fa-question-circle w-5"></i>
                                <span class="ml-2">Help</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="flex-1 content-area p-6">
            <!-- Dashboard View -->
            <div id="dashboard-view" class="view">
                <div class="mb-6">
                    <h1 class="text-2xl font-bold text-gray-900 academic-title">Dashboard</h1>
                    <p class="text-gray-600">Welcome to the Islamic Insight Journal admin panel.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Featured Articles</p>
                                <p class="text-2xl font-bold text-gray-900" id="featured-count">0</p>
                            </div>
                            <div class="rounded-full bg-blue-100 p-3">
                                <i class="fas fa-star text-blue-600"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Publications</p>
                                <p class="text-2xl font-bold text-gray-900" id="publications-count">0</p>
                            </div>
                            <div class="rounded-full bg-green-100 p-3">
                                <i class="fas fa-book text-green-600"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <div class="flex items-start justify-between">
                            <div>
                                <p class="text-gray-600 text-sm">Total Content</p>
                                <p class="text-2xl font-bold text-gray-900" id="total-content">0</p>
                            </div>
                            <div class="rounded-full bg-purple-100 p-3">
                                <i class="fas fa-file-alt text-purple-600"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6 mb-8">
                    <h2 class="font-semibold text-lg text-gray-900 mb-4">Recent Updates</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead>
                                <tr>
                                    <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Type</th>
                                    <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="recent-updates">
                                <!-- Recent updates will be populated here -->
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" colspan="4">
                                        No recent updates
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <h2 class="font-semibold text-lg text-gray-900 mb-4">Quick Actions</h2>
                    <div class="flex flex-wrap gap-4">
                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center" id="add-new-featured">
                            <i class="fas fa-plus-circle mr-2"></i> Add Featured Article
                        </button>
                        <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center" id="add-new-publication">
                            <i class="fas fa-plus-circle mr-2"></i> Add Publication
                        </button>
                        <button class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-md flex items-center" id="preview-site">
                            <i class="fas fa-eye mr-2"></i> Preview Site
                        </button>
                    </div>
                </div>
            </div>

            <!-- Featured Articles View -->
            <div id="featured-view" class="view hidden">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-900 academic-title">Featured Articles</h1>
                    <button id="add-featured-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i> Add New
                    </button>
                </div>

                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <div class="table-container">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50 sticky top-0">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Volume</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categories</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="featured-articles-table">
                                <!-- Dynamic content will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Publications View -->
            <div id="publications-view" class="view hidden">
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-900 academic-title">Publications</h1>
                    <button id="add-publication-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i> Add New
                    </button>
                </div>

                <div class="bg-white rounded-lg shadow overflow-hidden">
                    <div class="table-container">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50 sticky top-0">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Authors</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categories</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="publications-table">
                                <!-- Dynamic content will be added here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Preview View -->
            <div id="preview-view" class="view hidden">
                <div class="mb-6">
                    <h1 class="text-2xl font-bold text-gray-900 academic-title">Preview</h1>
                    <p class="text-gray-600">Preview how your site will look with the current data.</p>
                </div>

                <div class="bg-white rounded-lg shadow p-4">
                    <iframe id="preview-iframe" class="preview-frame w-full h-screen" srcdoc="Loading preview..."></iframe>
                </div>
            </div>

            <!-- Backup & Restore View -->
            <div id="backup-view" class="view hidden">
                <div class="mb-6">
                    <h1 class="text-2xl font-bold text-gray-900 academic-title">Backup & Restore</h1>
                    <p class="text-gray-600">Export or import your site data.</p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-lg shadow p-6">
                        <h2 class="font-semibold text-lg text-gray-900 mb-4">Export Data</h2>
                        <p class="text-gray-600 mb-4">Export all your articles and publications as a JSON file.</p>
                        <button id="export-data-btn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center">
                            <i class="fas fa-file-export mr-2"></i> Export Data
                        </button>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6">
                        <h2 class="font-semibold text-lg text-gray-900 mb-4">Import Data</h2>
                        <p class="text-gray-600 mb-4">Import articles and publications from a JSON file.</p>
                        <div class="flex flex-col">
                            <input type="file" id="import-data-file" accept=".json" class="mb-4">
                            <button id="import-data-btn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center self-start">
                                <i class="fas fa-file-import mr-2"></i> Import Data
                            </button>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow p-6 md:col-span-2">
                        <h2 class="font-semibold text-lg text-gray-900 mb-4">Reset Data</h2>
                        <p class="text-gray-600 mb-4">Be careful! This will reset all your data to the initial state.</p>
                        <button id="reset-data-btn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md flex items-center">
                            <i class="fas fa-trash mr-2"></i> Reset All Data
                        </button>
                    </div>
                </div>
            </div>

            <!-- Help View -->
            <div id="help-view" class="view hidden">
                <div class="mb-6">
                    <h1 class="text-2xl font-bold text-gray-900 academic-title">Help</h1>
                    <p class="text-gray-600">Get help using the admin panel.</p>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <h2 class="font-semibold text-lg text-gray-900 mb-4">How to Use</h2>
                    
                    <div class="space-y-6">
                        <div>
                            <h3 class="font-medium text-gray-900 mb-2">Managing Featured Articles</h3>
                            <p class="text-gray-600">Featured articles appear on the homepage with images. To add a new featured article:</p>
                            <ol class="list-decimal list-inside mt-2 ml-4 text-gray-600 space-y-1">
                                <li>Go to "Featured Articles" in the sidebar</li>
                                <li>Click "Add New" button</li>
                                <li>Fill in all the required information</li>
                                <li>Click "Save" to add the article</li>
                            </ol>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-900 mb-2">Managing Publications</h3>
                            <p class="text-gray-600">Publications appear in the publications section. To add a new publication:</p>
                            <ol class="list-decimal list-inside mt-2 ml-4 text-gray-600 space-y-1">
                                <li>Go to "Publications" in the sidebar</li>
                                <li>Click "Add New" button</li>
                                <li>Fill in all the required information</li>
                                <li>Click "Save" to add the publication</li>
                            </ol>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-900 mb-2">Backup and Restore</h3>
                            <p class="text-gray-600">To backup your data:</p>
                            <ol class="list-decimal list-inside mt-2 ml-4 text-gray-600 space-y-1">
                                <li>Go to "Backup & Restore" in the sidebar</li>
                                <li>Click "Export Data" to download a JSON file</li>
                            </ol>
                            <p class="text-gray-600 mt-2">To restore your data:</p>
                            <ol class="list-decimal list-inside mt-2 ml-4 text-gray-600 space-y-1">
                                <li>Go to "Backup & Restore" in the sidebar</li>
                                <li>Select a JSON file using "Choose File" button</li>
                                <li>Click "Import Data" to restore from the file</li>
                            </ol>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-900 mb-2">Previewing Your Site</h3>
                            <p class="text-gray-600">To see how your site will look with the current data:</p>
                            <ol class="list-decimal list-inside mt-2 ml-4 text-gray-600 space-y-1">
                                <li>Go to "Preview" in the sidebar</li>
                                <li>The preview will show how your site will appear with the current data</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add/Edit Featured Article Modal -->
    <div id="featured-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900" id="featured-modal-title">Add New Featured Article</h3>
                <button class="close-modal text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="featured-form" class="p-6">
                <input type="hidden" id="featured-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="col-span-2">
                        <label for="featured-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                        <input type="text" id="featured-title" name="title" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label for="featured-journal" class="block text-sm font-medium text-gray-700 mb-1">Journal</label>
                        <input type="text" id="featured-journal" name="journal" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Islamic Insight" required>
                    </div>
                    
                    <div>
                        <label for="featured-date" class="block text-sm font-medium text-gray-700 mb-1">Publication Date</label>
                        <input type="date" id="featured-date" name="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label for="featured-volume" class="block text-sm font-medium text-gray-700 mb-1">Volume</label>
                        <input type="text" id="featured-volume" name="volume" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Vol. 7, No. 2 (2024)" required>
                    </div>
                    
                    <div>
                        <label for="featured-pages" class="block text-sm font-medium text-gray-700 mb-1">Pages</label>
                        <input type="text" id="featured-pages" name="pages" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="pp. 30-50">
                    </div>
                    
                    <div class="col-span-2">
                        <label for="featured-abstract" class="block text-sm font-medium text-gray-700 mb-1">Abstract</label>
                        <textarea id="featured-abstract" name="abstract" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                    </div>

                    <div>
                        <label for="featured-categories" class="block text-sm font-medium text-gray-700 mb-1">Categories (comma-separated)</label>
                        <input type="text" id="featured-categories" name="categories" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Previous, Issued">
                    </div>
                    
                    <div>
                        <label for="featured-keywords" class="block text-sm font-medium text-gray-700 mb-1">Keywords (comma-separated)</label>
                        <input type="text" id="featured-keywords" name="keywords" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Islamic studies, Quran">
                    </div>
                    
                    <div class="col-span-2">
                        <label for="featured-image" class="block text-sm font-medium text-gray-700 mb-1">Image URL</label>
                        <input type="text" id="featured-image" name="imageUrl" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="vol7no2.jpg" required>
                    </div>
                    
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Content</label>
                        <div class="border border-gray-300 rounded-md overflow-hidden">
                            <div class="p-3 bg-gray-100 border-b border-gray-300 flex items-center justify-between">
                                <span class="text-sm font-medium text-gray-700">HTML Editor</span>
                                <div>
                                    <button type="button" id="preview-content-btn" class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded">Preview</button>
                                    <button type="button" id="edit-content-btn" class="text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded hidden">Edit</button>
                                </div>
                            </div>
                            <textarea id="featured-content" name="fullContent" class="w-full px-3 py-2 border-0 focus:outline-none focus:ring-0 md-editor" required></textarea>
                            <div id="content-preview" class="p-4 md-preview hidden"></div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button type="button" class="close-modal mr-3 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">
                        Cancel
                    </button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Publication Modal -->
    <div id="publication-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-4xl max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900" id="publication-modal-title">Add New Publication</h3>
                <button class="close-modal text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="publication-form" class="p-6">
                <input type="hidden" id="publication-id">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="col-span-2">
                        <label for="publication-title" class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                        <input type="text" id="publication-title" name="title" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label for="publication-authors" class="block text-sm font-medium text-gray-700 mb-1">Authors</label>
                        <input type="text" id="publication-authors" name="authors" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div>
                        <label for="publication-journal" class="block text-sm font-medium text-gray-700 mb-1">Journal</label>
                        <input type="text" id="publication-journal" name="journal" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" value="Islamic Insight" required>
                    </div>
                    
                    <div>
                        <label for="publication-date" class="block text-sm font-medium text-gray-700 mb-1">Publication Date</label>
                        <input type="date" id="publication-date" name="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required>
                    </div>
                    
                    <div>
                        <label for="publication-volume" class="block text-sm font-medium text-gray-700 mb-1">Volume</label>
                        <input type="text" id="publication-volume" name="volume" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Vol. 8, No 1">
                    </div>
                    
                    <div>
                        <label for="publication-pages" class="block text-sm font-medium text-gray-700 mb-1">Pages</label>
                        <input type="text" id="publication-pages" name="pages" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="pp. 30-50">
                    </div>
                    
                    <div>
                        <label for="publication-doi" class="block text-sm font-medium text-gray-700 mb-1">DOI</label>
                        <input type="text" id="publication-doi" name="doi" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="10.1234/example">
                    </div>
                    
                    <div class="col-span-2">
                        <label for="publication-abstract" class="block text-sm font-medium text-gray-700 mb-1">Abstract</label>
                        <textarea id="publication-abstract" name="abstract" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" required></textarea>
                    </div>

                    <div>
                        <label for="publication-categories" class="block text-sm font-medium text-gray-700 mb-1">Categories (comma-separated)</label>
                        <input type="text" id="publication-categories" name="categories" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Announcement, Call for Papers">
                    </div>
                    
                    <div>
                        <label for="publication-keywords" class="block text-sm font-medium text-gray-700 mb-1">Keywords (comma-separated)</label>
                        <input type="text" id="publication-keywords" name="keywords" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Islamic studies, Quran">
                    </div>
                    
                    <div class="col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Full Content</label>
                        <div class="border border-gray-300 rounded-md overflow-hidden">
                            <div class="p-3 bg-gray-100 border-b border-gray-300 flex items-center justify-between">
                                <span class="text-sm font-medium text-gray-700">HTML Editor</span>
                                <div>
                                    <button type="button" id="preview-pub-content-btn" class="text-xs bg-blue-600 hover:bg-blue-700 text-white px-2 py-1 rounded">Preview</button>
                                    <button type="button" id="edit-pub-content-btn" class="text-xs bg-gray-600 hover:bg-gray-700 text-white px-2 py-1 rounded hidden">Edit</button>
                                </div>
                            </div>
                            <textarea id="publication-content" name="fullContent" class="w-full px-3 py-2 border-0 focus:outline-none focus:ring-0 md-editor" required></textarea>
                            <div id="pub-content-preview" class="p-4 md-preview hidden"></div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 flex justify-end">
                    <button type="button" class="close-modal mr-3 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">
                        Cancel
                    </button>
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">
                        Save
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-lg w-full max-w-md">
            <div class="p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Confirm Deletion</h3>
                <p class="text-gray-600 mb-6" id="delete-message">Are you sure you want to delete this item? This action cannot be undone.</p>
                <div class="flex justify-end">
                    <button id="cancel-delete" class="mr-3 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">
                        Cancel
                    </button>
                    <button id="confirm-delete" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast bg-green-500 text-white hidden">
        <span id="toast-message">Operation completed successfully!</span>
    </div>

    <script>
        // Data storage
        let featuredArticles = [];
        let publications = [];
        let nextId = 1;
        let itemToDelete = null;

        // DOM Elements
        const views = document.querySelectorAll('.view');
        const navLinks = document.querySelectorAll('.nav-link');
        const featuredArticlesTable = document.getElementById('featured-articles-table');
        const publicationsTable = document.getElementById('publications-table');
        const featuredModal = document.getElementById('featured-modal');
        const publicationModal = document.getElementById('publication-modal');
        const deleteModal = document.getElementById('delete-modal');
        const toast = document.getElementById('toast');
        const previewFrame = document.getElementById('preview-iframe');
        const featuredForm = document.getElementById('featured-form');
        const publicationForm = document.getElementById('publication-form');
        const deleteMessage = document.getElementById('delete-message');
        const confirmDelete = document.getElementById('confirm-delete');
        const cancelDelete = document.getElementById('cancel-delete');
        const addFeaturedBtn = document.getElementById('add-featured-btn');
        const addPublicationBtn = document.getElementById('add-publication-btn');
        const dashboardFeaturedBtn = document.getElementById('add-new-featured');
        const dashboardPublicationBtn = document.getElementById('add-new-publication');
        const previewSiteBtn = document.getElementById('preview-site');
        const saveAllBtn = document.getElementById('save-all-btn');
        const exportBtn = document.getElementById('export-btn');
        const importBtn = document.getElementById('import-btn');
        const exportDataBtn = document.getElementById('export-data-btn');
        const importDataBtn = document.getElementById('import-data-btn');
        const importDataFile = document.getElementById('import-data-file');
        const resetDataBtn = document.getElementById('reset-data-btn');
        const closeModalBtns = document.querySelectorAll('.close-modal');
        const previewContentBtn = document.getElementById('preview-content-btn');
        const editContentBtn = document.getElementById('edit-content-btn');
        const previewPubContentBtn = document.getElementById('preview-pub-content-btn');
        const editPubContentBtn = document.getElementById('edit-pub-content-btn');
        const featuredContent = document.getElementById('featured-content');
        const contentPreview = document.getElementById('content-preview');
        const publicationContent = document.getElementById('publication-content');
        const pubContentPreview = document.getElementById('pub-content-preview');
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            setupEventListeners();
            showView('dashboard');
            updateDashboardCounts();
        });

        // Setup Event Listeners
        function setupEventListeners() {
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const view = this.getAttribute('data-view');
                    showView(view);
                });
            });

            // Modal buttons
            addFeaturedBtn.addEventListener('click', () => openFeaturedModal());
            addPublicationBtn.addEventListener('click', () => openPublicationModal());
            dashboardFeaturedBtn.addEventListener('click', () => {
                showView('featured');
                openFeaturedModal();
            });
            dashboardPublicationBtn.addEventListener('click', () => {
                showView('publications');
                openPublicationModal();
            });
            previewSiteBtn.addEventListener('click', () => showView('preview'));
            
            // Close modals
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    featuredModal.classList.add('hidden');
                    publicationModal.classList.add('hidden');
                    deleteModal.classList.add('hidden');
                });
            });

            // Delete buttons
            cancelDelete.addEventListener('click', () => deleteModal.classList.add('hidden'));
            confirmDelete.addEventListener('click', confirmDeleteItem);

            // Forms
            featuredForm.addEventListener('submit', handleFeaturedForm);
            publicationForm.addEventListener('submit', handlePublicationForm);

            // Content preview
            previewContentBtn.addEventListener('click', () => {
                contentPreview.innerHTML = featuredContent.value;
                featuredContent.classList.add('hidden');
                contentPreview.classList.remove('hidden');
                previewContentBtn.classList.add('hidden');
                editContentBtn.classList.remove('hidden');
            });

            editContentBtn.addEventListener('click', () => {
                featuredContent.classList.remove('hidden');
                contentPreview.classList.add('hidden');
                previewContentBtn.classList.remove('hidden');
                editContentBtn.classList.add('hidden');
            });

            previewPubContentBtn.addEventListener('click', () => {
                pubContentPreview.innerHTML = publicationContent.value;
                publicationContent.classList.add('hidden');
                pubContentPreview.classList.remove('hidden');
                previewPubContentBtn.classList.add('hidden');
                editPubContentBtn.classList.remove('hidden');
            });

            editPubContentBtn.addEventListener('click', () => {
                publicationContent.classList.remove('hidden');
                pubContentPreview.classList.add('hidden');
                previewPubContentBtn.classList.remove('hidden');
                editPubContentBtn.classList.add('hidden');
            });

            // Save all changes
            saveAllBtn.addEventListener('click', saveData);

            // Export and import
            exportBtn.addEventListener('click', exportData);
            importBtn.addEventListener('click', () => document.getElementById('backup-link').click());
            exportDataBtn.addEventListener('click', exportData);
            importDataBtn.addEventListener('click', importData);
            resetDataBtn.addEventListener('click', confirmResetData);
        }

        // Show selected view
        function showView(viewId) {
            views.forEach(view => view.classList.add('hidden'));
            document.getElementById(`${viewId}-view`).classList.remove('hidden');
            
            // Add active class to nav link
            navLinks.forEach(link => {
                link.querySelector('div').classList.remove('bg-blue-50', 'text-blue-900');
                link.querySelector('div').classList.add('hover:bg-blue-50', 'text-gray-700', 'hover:text-blue-900');
            });
            document.getElementById(`${viewId}-link`).querySelector('div').classList.add('bg-blue-50', 'text-blue-900');
            document.getElementById(`${viewId}-link`).querySelector('div').classList.remove('hover:bg-blue-50', 'text-gray-700');
            
            // Load specific view content
            if (viewId === 'featured') {
                renderFeaturedArticles();
            } else if (viewId === 'publications') {
                renderPublications();
            } else if (viewId === 'preview') {
                renderPreview();
            }
        }

        // Load data from local storage
        function loadData() {
            try {
                const savedFeatured = localStorage.getItem('featuredArticles');
                const savedPublications = localStorage.getItem('publications');
                const savedNextId = localStorage.getItem('nextId');
                
                if (savedFeatured) {
                    featuredArticles = JSON.parse(savedFeatured);
                } else {
                    // Initialize with sample data
                    featuredArticles = [
                        {
                            id: 1,
                            title: "Vol. 7 No. 2 (2024) ISLAMIC INSIGHT JOURNAL OF ISLAMIC STUDIES",
                            authors: "",
                            journal: "Islamic Insight",
                            date: "2024-12-01",
                            volume: "Vol. 7 No. 2 (2024)",
                            pages: "",
                            doi: "",
                            categories: ["Previous", "Issued"],
                            abstract: "Islamic Insight Journal of Islamic Studies (IIJIS) functions as a bilingual (English and Arabi) platform for disseminating exceptional academic research on Islam and the Muslim world.",
                            keywords: [""],
                            imageUrl: "vol7no2.jpg",
                            fullContent: `
                                <p>Islamic Insight Journal of Islamic Studies (IIJIS) functions as a bilingual (English and Arabi) platform for disseminating exceptional academic research on Islam and the Muslim world. It welcomes original scholarship across various disciplines, encompassing textual analysis of the Quran and Hadith, Islamic legal and theological discourse, philosophy, comparative religion, social sciences, and the historical and cultural experiences of Muslims. Notably, IIJIS employs a rigorous double-blind peer review process to ensure the quality of published works.</p>
                                <h2>Articles</h2>
                                <button onclick="location.href='index1.html'" style="font-size:24px;color:blue;">SHOW ALL <i class="fa fa-book"></i></button>
                                <br><br><br>
                            `
                        },
                        {
                            id: 2,
                            title: "Vol. 7 No. 1 (2024) ISLAMIC INSIGHT: JOURNAL OF ISLAMIC STUDIES",
                            authors: "",
                            journal: "Islamic Insight",
                            date: "2024-06-30",
                            volume: "Vol. 7 No. 1 (2024)",
                            pages: "",
                            doi: "",
                            categories: ["Previous", "Issued"],
                            abstract: "Islamic Insight Journal of Islamic Studies (IIJIS) functions as a bilingual (English and Arabi) platform for disseminating exceptional academic research on Islam and the Muslim world.",
                            keywords: [""],
                            imageUrl: "vol7no1.jpg",
                            fullContent: `
                                <p>Islamic Insight Journal of Islamic Studies (IIJIS) functions as a bilingual (English and Arabi) platform for disseminating exceptional academic research on Islam and the Muslim world. It welcomes original scholarship across various disciplines, encompassing textual analysis of the Quran and Hadith, Islamic legal and theological discourse, philosophy, comparative religion, social sciences, and the historical and cultural experiences of Muslims. Notably, IIJIS employs a rigorous double-blind peer review process to ensure the quality of published works.</p>
                                <h2>Articles</h2>
                                <button onclick="location.href='index2.html'" style="font-size:24px;color:blue;">SHOW ALL <i class="fa fa-book"></i></button>
                                <br><br><br>
                            `
                        }
                    ];
                }
                
                if (savedPublications) {
                    publications = JSON.parse(savedPublications);
                } else {
                    // Initialize with sample data
                    publications = [
                        {
                            id: 0,
                            title: "Call For Papers",
                            authors: "",
                            journal: "Islamic Insight",
                            date: "2025-05-14",
                            volume: "Vol. 8, No 1",
                            pages: "pp. 30-50",
                            doi: "",
                            categories: ["Announcement"],
                            abstract: "We are pleased to invite original research articles for the upcoming issue of Islamic Insight, a biannual peer-reviewed journal published by the Kulliyyah of Qur'an and Sunnah, Darul Huda Islamic University, Kerala, India.",
                            keywords: ["For submission: islamicinsight@dhiu.in"],
                            fullContent: `
                                <h2>Call For Papers</h2>
                                <p>We are pleased to invite original research articles for the upcoming issue of Islamic Insight, a biannual peer-reviewed journal published by the Kulliyyah of Qur'an and Sunnah, Darul Huda Islamic University, Kerala, India. Islamic Insight welcomes high-quality, interdisciplinary research in areas related to Islamic revealed knowledge and the Muslim world. This includes-but is not limited to- studies in the Noble Qur'an, Hadith, Islamic Theology, Islamic Social Sciences, and Muslim History and Culture. Unique and relevant contributions beyond the prescribed disciplines are also encouraged. All submissions will undergo a double-blind peer review process. Send your manuscripts by mid-June 2025 for consideration in Vol. 8, No. 1 (2025).</p>
                                <p>For submission: islamicinsight@dhiu.in</p>
                            `
                        }
                    ];
                }
                
                nextId = savedNextId ? parseInt(savedNextId) : 3;
                
            } catch (error) {
                console.error('Error loading data:', error);
                showToast('Error loading data from storage.', 'error');
            }
        }

        // Save data to local storage
        function saveData() {
            try {
                localStorage.setItem('featuredArticles', JSON.stringify(featuredArticles));
                localStorage.setItem('publications', JSON.stringify(publications));
                localStorage.setItem('nextId', nextId.toString());
                showToast('All changes saved successfully!');
            } catch (error) {
                console.error('Error saving data:', error);
                showToast('Error saving data to storage.', 'error');
            }
        }

        // Render featured articles table
        function renderFeaturedArticles() {
            featuredArticlesTable.innerHTML = '';
            
            if (featuredArticles.length === 0) {
                featuredArticlesTable.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                            No featured articles yet. Click "Add New" to create one.
                        </td>
                    </tr>
                `;
                return;
            }
            
            featuredArticles.forEach(article => {
                const row = document.createElement('tr');
                
                const formattedDate = new Date(article.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                const categories = article.categories ? article.categories.join(', ') : '';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${article.id}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="font-medium">${article.title}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${article.volume}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formattedDate}</td>
                    <td class="px-6 py-4 text-sm text-gray-500">${categories}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-blue-600 hover:text-blue-900 mr-3" onclick="editFeaturedArticle(${article.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="text-red-600 hover:text-red-900" onclick="deleteFeaturedArticle(${article.id})">
                            <i class="fas fa-trash-alt"></i> Delete
                        </button>
                    </td>
                `;
                
                featuredArticlesTable.appendChild(row);
            });
        }

        // Render publications table
        function renderPublications() {
            publicationsTable.innerHTML = '';
            
            if (publications.length === 0) {
                publicationsTable.innerHTML = `
                    <tr>
                        <td colspan="6" class="px-6 py-4 text-center text-gray-500">
                            No publications yet. Click "Add New" to create one.
                        </td>
                    </tr>
                `;
                return;
            }
            
            publications.forEach(pub => {
                const row = document.createElement('tr');
                
                const formattedDate = new Date(pub.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                const categories = pub.categories ? pub.categories.join(', ') : '';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${pub.id}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="font-medium">${pub.title}</div>
                    </td>
                    <td class="px-6 py-4 text-sm text-gray-500">${pub.authors || 'N/A'}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formattedDate}</td>
                    <td class="px-6 py-4 text-sm text-gray-500">${categories}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button class="text-blue-600 hover:text-blue-900 mr-3" onclick="editPublication(${pub.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="text-red-600 hover:text-red-900" onclick="deletePublication(${pub.id})">
                            <i class="fas fa-trash-alt"></i> Delete
                        </button>
                    </td>
                `;
                
                publicationsTable.appendChild(row);
            });
        }

        // Open featured article modal for adding
        function openFeaturedModal(article = null) {
            const modalTitle = document.getElementById('featured-modal-title');
            
            if (article) {
                modalTitle.textContent = 'Edit Featured Article';
                document.getElementById('featured-id').value = article.id;
                document.getElementById('featured-title').value = article.title;
                document.getElementById('featured-journal').value = article.journal;
                document.getElementById('featured-date').value = formatDateForInput(article.date);
                document.getElementById('featured-volume').value = article.volume;
                document.getElementById('featured-pages').value = article.pages;
                document.getElementById('featured-abstract').value = article.abstract;
                document.getElementById('featured-categories').value = article.categories.join(', ');
                document.getElementById('featured-keywords').value = article.keywords.join(', ');
                document.getElementById('featured-image').value = article.imageUrl;
                document.getElementById('featured-content').value = article.fullContent;
            } else {
                modalTitle.textContent = 'Add New Featured Article';
                featuredForm.reset();
                document.getElementById('featured-id').value = '';
                document.getElementById('featured-date').value = formatDateForInput(new Date());
            }
            
            featuredModal.classList.remove('hidden');
            contentPreview.classList.add('hidden');
            featuredContent.classList.remove('hidden');
            previewContentBtn.classList.remove('hidden');
            editContentBtn.classList.add('hidden');
        }

        // Open publication modal for adding
        function openPublicationModal(publication = null) {
            const modalTitle = document.getElementById('publication-modal-title');
            
            if (publication) {
                modalTitle.textContent = 'Edit Publication';
                document.getElementById('publication-id').value = publication.id;
                document.getElementById('publication-title').value = publication.title;
                document.getElementById('publication-authors').value = publication.authors;
                document.getElementById('publication-journal').value = publication.journal;
                document.getElementById('publication-date').value = formatDateForInput(publication.date);
                document.getElementById('publication-volume').value = publication.volume;
                document.getElementById('publication-pages').value = publication.pages;
                document.getElementById('publication-doi').value = publication.doi;
                document.getElementById('publication-abstract').value = publication.abstract;
                document.getElementById('publication-categories').value = publication.categories.join(', ');
                document.getElementById('publication-keywords').value = publication.keywords.join(', ');
                document.getElementById('publication-content').value = publication.fullContent;
            } else {
                modalTitle.textContent = 'Add New Publication';
                publicationForm.reset();
                document.getElementById('publication-id').value = '';
                document.getElementById('publication-date').value = formatDateForInput(new Date());
                document.getElementById('publication-journal').value = 'Islamic Insight';
            }
            
            publicationModal.classList.remove('hidden');
            pubContentPreview.classList.add('hidden');
            publicationContent.classList.remove('hidden');
            previewPubContentBtn.classList.remove('hidden');
            editPubContentBtn.classList.add('hidden');
        }

        // Handle featured article form submission
        function handleFeaturedForm(e) {
            e.preventDefault();
            
            const id = document.getElementById('featured-id').value;
            const title = document.getElementById('featured-title').value;
            const journal = document.getElementById('featured-journal').value;
            const date = document.getElementById('featured-date').value;
            const volume = document.getElementById('featured-volume').value;
            const pages = document.getElementById('featured-pages').value;
            const abstract = document.getElementById('featured-abstract').value;
            const categories = document.getElementById('featured-categories').value.split(',').map(cat => cat.trim());
            const keywords = document.getElementById('featured-keywords').value.split(',').map(kw => kw.trim());
            const imageUrl = document.getElementById('featured-image').value;
            const fullContent = document.getElementById('featured-content').value;
            
            const article = {
                title,
                authors: "",
                journal,
                date,
                volume,
                pages,
                doi: "",
                categories,
                abstract,
                keywords,
                imageUrl,
                fullContent
            };
            
            if (id) {
                // Edit existing article
                article.id = parseInt(id);
                const index = featuredArticles.findIndex(a => a.id === parseInt(id));
                if (index !== -1) {
                    featuredArticles[index] = article;
                    showToast('Featured article updated successfully!');
                }
            } else {
                // Add new article
                article.id = nextId++;
                featuredArticles.push(article);
                showToast('New featured article added successfully!');
            }
            
            saveData();
            renderFeaturedArticles();
            updateDashboardCounts();
            featuredModal.classList.add('hidden');
        }

        // Handle publication form submission
        function handlePublicationForm(e) {
            e.preventDefault();
            
            const id = document.getElementById('publication-id').value;
            const title = document.getElementById('publication-title').value;
            const authors = document.getElementById('publication-authors').value;
            const journal = document.getElementById('publication-journal').value;
            const date = document.getElementById('publication-date').value;
            const volume = document.getElementById('publication-volume').value;
            const pages = document.getElementById('publication-pages').value;
            const doi = document.getElementById('publication-doi').value;
            const abstract = document.getElementById('publication-abstract').value;
            const categories = document.getElementById('publication-categories').value.split(',').map(cat => cat.trim());
            const keywords = document.getElementById('publication-keywords').value.split(',').map(kw => kw.trim());
            const fullContent = document.getElementById('publication-content').value;
            
            const publication = {
                title,
                authors,
                journal,
                date,
                volume,
                pages,
                doi,
                categories,
                abstract,
                keywords,
                fullContent
            };
            
            if (id) {
                // Edit existing publication
                publication.id = parseInt(id);
                const index = publications.findIndex(p => p.id === parseInt(id));
                if (index !== -1) {
                    publications[index] = publication;
                    showToast('Publication updated successfully!');
                }
            } else {
                // Add new publication
                publication.id = nextId++;
                publications.push(publication);
                showToast('New publication added successfully!');
            }
            
            saveData();
            renderPublications();
            updateDashboardCounts();
            publicationModal.classList.add('hidden');
        }

        // Edit featured article
        function editFeaturedArticle(id) {
            const article = featuredArticles.find(a => a.id === id);
            if (article) {
                openFeaturedModal(article);
            }
        }

        // Edit publication
        function editPublication(id) {
            const publication = publications.find(p => p.id === id);
            if (publication) {
                openPublicationModal(publication);
            }
        }

        // Delete featured article
        function deleteFeaturedArticle(id) {
            const article = featuredArticles.find(a => a.id === id);
            if (article) {
                itemToDelete = { type: 'featured', id };
                deleteMessage.textContent = `Are you sure you want to delete the featured article "${article.title}"? This action cannot be undone.`;
                deleteModal.classList.remove('hidden');
            }
        }

        // Delete publication
        function deletePublication(id) {
            const publication = publications.find(p => p.id === id);
            if (publication) {
                itemToDelete = { type: 'publication', id };
                deleteMessage.textContent = `Are you sure you want to delete the publication "${publication.title}"? This action cannot be undone.`;
                deleteModal.classList.remove('hidden');
            }
        }

        // Confirm delete item
        function confirmDeleteItem() {
            if (!itemToDelete) return;
            
            if (itemToDelete.type === 'featured') {
                featuredArticles = featuredArticles.filter(a => a.id !== itemToDelete.id);
                renderFeaturedArticles();
                showToast('Featured article deleted successfully!');
            } else if (itemToDelete.type === 'publication') {
                publications = publications.filter(p => p.id !== itemToDelete.id);
                renderPublications();
                showToast('Publication deleted successfully!');
            }
            
            updateDashboardCounts();
            saveData();
            deleteModal.classList.add('hidden');
            itemToDelete = null;
        }

        // Update dashboard counts
        function updateDashboardCounts() {
            document.getElementById('featured-count').textContent = featuredArticles.length;
            document.getElementById('publications-count').textContent = publications.length;
            document.getElementById('total-content').textContent = featuredArticles.length + publications.length;
            
            // Update recent updates
            const recentUpdates = document.getElementById('recent-updates');
            const allItems = [
                ...featuredArticles.map(item => ({ ...item, type: 'Featured' })),
                ...publications.map(item => ({ ...item, type: 'Publication' }))
            ].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 5);
            
            if (allItems.length === 0) {
                recentUpdates.innerHTML = `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500" colspan="4">
                            No recent updates
                        </td>
                    </tr>
                `;
                return;
            }
            
            recentUpdates.innerHTML = allItems.map(item => {
                const formattedDate = new Date(item.date).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                return `
                    <tr>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">${item.title}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.type}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${formattedDate}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                Published
                            </span>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            
            toastMessage.textContent = message;
            toast.className = `toast ${type === 'success' ? 'bg-green-500' : 'bg-red-500'} text-white`;
            toast.classList.remove('hidden');
            
            // Hide after 3 seconds
            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.5s';
                setTimeout(() => {
                    toast.classList.add('hidden');
                    toast.style.animation = '';
                }, 500);
            }, 3000);
        }

        // Format date for input element
        function formatDateForInput(date) {
            if (!date) return '';
            
            const d = new Date(date);
            const year = d.getFullYear();
            const month = String(d.getMonth() + 1).padStart(2, '0');
            const day = String(d.getDate()).padStart(2, '0');
            
            return `${year}-${month}-${day}`;
        }

        // Render preview
        function renderPreview() {
            const previewData = {
                featuredArticles,
                publications
            };
            
            const previewHtml = generatePreviewHtml(previewData);
            previewFrame.srcdoc = previewHtml;
        }

        // Generate preview HTML
        function generatePreviewHtml(data) {
            return `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Insight - Preview</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .academic-title {
            font-family: 'Crimson Text', serif;
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
            margin-bottom: 0.25rem;
        }
        
        .badge-blue { background: #ebf8ff; color: #2b6cb0; }
        .badge-green { background: #f0fff4; color: #2f855a; }
        .badge-red { background: #fff5f5; color: #c53030; }
        .badge-purple { background: #faf5ff; color: #6b46c1; }
        .badge-yellow { background: #fffaf0; color: #b7791f; }
        
        .article-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .article-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .article-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 8px 8px 0 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold text-black-900 academic-title">
                            ISLAMIC INSIGHT
                        </h1>
                    </div>
                </div>
                
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">Home</a>
                        <a href="#" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">All Issues</a>
                        <a href="#" class="text-gray-700 hover:text-blue-900 px-3 py-2 text-sm font-medium transition-colors">Contact</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <header class="bg-gradient-to-br from-blue-900 to-blue-800 text-white py-16 sm:py-20 lg:py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold academic-title mb-6">
                    Islamic Insight Journal
                </h2>
                <p class="text-lg sm:text-xl lg:text-2xl mb-8 max-w-3xl mx-auto">
                    International, peer-reviewed cross-disciplinary journal
                </p>
                
                <div class="max-w-md mx-auto">
                    <div class="relative">
                        <input
                            type="text"
                            placeholder="Search articles, authors, keywords..."
                            class="w-full px-4 py-3 pl-10 pr-4 text-gray-900 bg-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        >
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Featured Articles -->
    <section id="featured" class="py-12 sm:py-16 lg:py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold academic-title text-gray-900 mb-4">
                    All Issues
                </h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
                ${data.featuredArticles.map(article => `
                    <div class="article-card bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
                        <div class="article-image" style="background-image: url('${article.imageUrl}');"></div>
                        <div class="p-6">
                            <div class="mb-4">
                                ${article.categories.map((category, index) => 
                                    `<span class="badge badge-${['blue', 'green', 'red', 'purple', 'yellow'][index % 5]}">${category}</span>`
                                ).join('')}
                            </div>
                            <h3 class="text-xl font-semibold academic-title text-gray-900 mb-3 line-clamp-2">
                                ${article.title}
                            </h3>
                            <p class="text-sm text-gray-600 mb-3">
                                <i class="far fa-calendar-alt"></i> ${new Date(article.date).toLocaleDateString('en-US', {
                                    year: 'numeric',
                                    month: 'short',
                                    day: 'numeric'
                                })}
                            </p>
                            <p class="text-gray-700 mb-4 line-clamp-3">
                                ${article.abstract}
                            </p>
                            <div class="flex flex-wrap gap-1 mb-4">
                                ${article.keywords.slice(0, 3).map(keyword => 
                                    `<span class="text-xs bg-gray-100 text-gray-600 rounded-full px-2 py-1">${keyword}</span>`
                                ).join('')}
                            </div>
                            <div class="flex justify-between items-center">
                                <button class="text-blue-900 hover:text-blue-700 font-medium transition-colors">
                                    Read More <i class="fas fa-arrow-right ml-1"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h3 class="text-lg font-semibold academic-title mb-2">Islamic Insight</h3>
                <p class="text-gray-400 text-sm mb-4">
                    International, peer-reviewed cross-disciplinary journal
                </p>
                <p class="text-gray-500 text-xs">
                     2025 Islamic Insight. All rights reserved.
                </p>
            </div>
        </div>
    </footer>
</body>
</html>
            `;
        }

        // Export data to JSON file
        function exportData() {
            const data = {
                featuredArticles,
                publications,
                nextId
            };
            
            const jsonString = JSON.stringify(data, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `islamic-insight-data-${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Data exported successfully!');
        }

        // Import data from JSON file
        function importData() {
            const fileInput = document.getElementById('import-data-file');
            const file = fileInput.files[0];
            
            if (!file) {
                showToast('Please select a file to import.', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.featuredArticles && Array.isArray(data.featuredArticles) &&
                        data.publications && Array.isArray(data.publications) &&
                        data.nextId) {
                        
                        featuredArticles = data.featuredArticles;
                        publications = data.publications;
                        nextId = data.nextId;
                        
                        saveData();
                        renderFeaturedArticles();
                        renderPublications();
                        updateDashboardCounts();
                        
                        showToast('Data imported successfully!');
                        fileInput.value = '';
                    } else {
                        showToast('Invalid data format in the imported file.', 'error');
                    }
                } catch (error) {
                    console.error('Error importing data:', error);
                    showToast('Error importing data. Please check the file format.', 'error');
                }
            };
            
            reader.readAsText(file);
        }

        // Confirm reset data
        function confirmResetData() {
            if (confirm('Are you sure you want to reset all data? This action cannot be undone.')) {
                localStorage.removeItem('featuredArticles');
                localStorage.removeItem('publications');
                localStorage.removeItem('nextId');
                
                loadData();
                renderFeaturedArticles();
                renderPublications();
                updateDashboardCounts();
                
                showToast('All data has been reset to initial state.');
            }
        }

        // Global functions needed for event handlers
        window.editFeaturedArticle = editFeaturedArticle;
        window.editPublication = editPublication;
        window.deleteFeaturedArticle = deleteFeaturedArticle;
        window.deletePublication = deletePublication;
    </script>
</body>
</html>
